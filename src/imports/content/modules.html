<h3>Modules <em>(including handlers)</em></h3>

<p>
	Modules are an easy way to extend <code>routemaster</code> in a modular fashion 
	without having to compile and deploy everything together.
</p>

<p>
	In this way you may develop specific routes, features and handlers and package 
	them into small binaries that can then be distributed easily.
</p>

<h4>The routemaster (server edition)</h4>

<p>
	Routemaster now comes in a <code>server</code> edition which is the lightest-
	weight version and contains no registered:
</p>

<ul>
	<li>options</li>
	<li>handlers</li>
	<li>routes (RESTful or otherwise)</li>
</ul>

<p>
	Whilst this will still work as a web server, this will need to be extended by 
	using modules.
</p>

<p>
	The server version can be downloaded from the <a href="https://github.com/synapticloop/routemaster/releases">GitHub releases</a> 
	page.  The jar that you are looking for is the one with the <code>server</code> 
	classifier (e.g. <code>routemaster-2.1.0-server.jar</code>).
</p>

<h3>Setting up the server</h3>

<h4>Step 1: Download the jar file</h4>

<p>
	Download the jar file.
</p>

<h4>Step 2: create a modules directory</h4>

<p>
	In the same directory as the downloaded file (in fact it needs to be in the same 
	directory from which you run the routemaster server) create a directory named 
	<code>modules</code>.
</p>

<h4>Step 3: Use the modules</h4>

<p>
	In this directory - place any of the modules that you want to use.
</p>

<h4>Step 4: Start the server</h4>

<p>
	Start the server with the command (for example)
</p>

<pre><code>java -jar routemaster-2.1.0-server.jar</code></pre>

<p>
	The modules will then be loaded and registered for use
</p>

<h3>Configuring modules</h3>

<p>
	By default, routemaster modules have in-built configuration options in the deployed 
	module - they all must have a <code>routemaster.properties</code> file in the root 
	of the jar file - which is named the same as the module's jar name - for the 
	example module, this would be named <code>routemaster-module-example.properties</code>. 
	This indicates to routemaster that this is a module to be loaded - all other jar 
	files will be ignored.
</p>

<p>
	That being said, you may over-ride the options that are the defaults by providing 
	a separate file which is the name of the module appended with <code>.properties</code>.
	For example:
</p>

<pre><code>routemaster-module-example-1.0.0.jar</code></pre>

<p>
	Can have its properties over-ridden by providing a 
</p>

<pre><code>routemaster-module-example.properties</code></pre>

<p>
	file in the <code>modules/</code> directory (i.e. the same directory that the 
	module jar file resides).
</p>

<h4>Configuration priority</h4>

<ol>
	<li>
		The default <code>routemaster.properties</code> will be loaded first - this 
		may be either in the directory that the routemaster server was started from, 
		or within the root of the routemaster jar (if it exists).
	</li>
	<li>
		The module properties are then checked next (i.e. <code>module_name.properties</code>) 
		if they exist, then the <code>routemaster.properties</code> within the module 
		jar file is not checked.
	</li>
	<li>
		Finally, the <code>module_name.properties</code> within the module 
		jar file is checked and loaded. <strong>NOTE</strong> that if the above properties 
		file is found, then the properties file within the module jar is not checked.
	</li>
</ol>
